{% assign data = site.data[include.data] | default: site[include.data] %}
{% assign component = include.component | append: ".html" %}

{% assign filters = include.filters | split: "," %}
{% for filter in filters %}
  {% assign entry = filter | split: ":" %}
  {% assign key = entry[0] | strip %}
  {% assign value = entry[1] | strip | default: nil %}
  {% assign data = data | where_exp: "d", "d[key] == value" %}
{% endfor %}

{% for d in data %}

  {% assign caption = d.caption %}
  {% assign description = d.description %}
  {% assign headline = d.headline %}
  {% assign height = d.height %}
  {% assign icon = d.icon %}
  {% assign image = d.image %}
  {% assign link = d.link | default: d.url %}
  {% assign mini = d.mini %}
  {% assign name = d.name %}
  {% assign repo = d.repo %}
  {% assign role = d.role %}
  {% assign style = d.style | default: include.style %}
  {% assign tags = d.tags %}
  {% assign text = d.text %}
  {% assign tooltip = d.tooltip %}
  {% assign truncate = d.truncate %}
  {% assign type = d.type %}
  {% assign width = d.width %}

  {%
    include {{ component }}
    caption=caption
    description=description
    headline=headline
    height=height
    icon=icon
    image=image
    link=link
    name=name
    repo=repo
    role=role
    style=style
    tags=tags
    title=title
    text=text
    tooltip=tooltip
    truncate=truncate
    type=type
    width=width
  %}

{% endfor %}
